- in this room, we will scan ports using three nmap methods:
	1. TCP connect port scan
	2. TCP SYN port scan
	3. UDP port scan
	
- response status:
	1. open => indicates that a service is listening on that port
	2. closed => indicates that no service is listening on that port, although the port is accessable, accessable means it's reachable and is not blocked by a firewall 
	3. filtered => nmap cannot determine whether it is open or closed, cause the port is not accessable, it can be due to a firewall preventing nmap from reaching the port,or preventing the response
	4. unfiltered => nmap cannot determiine whther the port is open or closed, althoughh the port is accessable, this can be encounterd when using ACK scan -sA
	5. open|filterd => nmap cannot determine whether the port is open or filtered
	6. closed|filterd => nmap cannot determine whether the port is closed or filtered

---------------------------------------------

- TCP Flags
	`https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/79ca8e4acbd573a27cee413cde927769.png`

		1. URG => indicates that the incoming data is urgent
		2. ACK => used to acknowledge the receipt of the TCP segment
		3. PSH => asking the TCP to pass the data to the application promptly
		4. RST => reset the connection
		5. SYN: Synchronize flag is used to initiate a TCP 3-way handshake and synchronize sequence numbers with the other host. The sequence number should be set randomly during TCP connection establishment.
		6. FIN: The sender has no more data to send

----------------------------------------------

1. TCP Connect Scan:
	- TCP connect scan works by completing the 3-way handshake
	- in the TCP 3-way handshake, the client sends a TCP packet with a SYN flag, the server responds with a TCP packet with SYN/ACK flags if the port is open, the cleint sends ACK to complete the TCP connection between the client and the server.
	- when using TCP connect scan you do not want to establish a connection between you and the server so the cliend send RST/ACK flags to reset the connection after ACK it
	- TCP port scan can be done with no root or sudoer

	- `nmap -sT target`
	- we can use -F to enable fast mode and decrease the number f scanned ports from 1000 to 100 most common
	- we can use -r for consencutive order, scans the ports in order

------------------------------------------------

2. TCP SYN Scan:
	- it is the default port scan and only for root and sudoer .
	- once the client send a SYN and receivve a SYN/ACK from the server the clent send RST to tear the connection before being established.
	- SYN scan => `nmap -sS target`
	-TCP SYN scan is the default scan mode when running Nmap as a privileged user, running as root or using sudo, and it is a very reliable choice. It has successfully discovered the open ports you found earlier with the TCP connect scan, yet no TCP connection was fully established with the target.
	- while scaning using TCP connect scan, any response With SYN/ACK means that the port is closed, in contrast if the port is open the target will reply with SYN/ACK to complete the 3-way handshake

- NOTES:	
	-F: Fast mode - Scan fewer ports than the default scan
	-r: Scan ports sequentially - don't randomize
	-v to get updates as the scan progresses

-------------------------------------------------

4. UDP Port Scan:
	- when sending a UDP packet to a target on a specific port, we do not expect to get any reply , but when sending a UDP packet to a target on a closed port we would get an ICMP port unreachable error (type 3) 
	- we can perform a UDP scan using -sU  =>`nmap -sU target`

--------------------------------------------------

- Managing The Scope & Performance:

	1. scoping ports:
		-p23,22,443 => ports list
		-p1-33  => port range from 1 to 33
		-p- => to scan all ports (65535)
		-F => 100 top common port
		--top-ports 10 => top common 10 port

	2. Controling Performance:
		-T<0-5> => to control timing
		-T0 paranoid
		-T1 sneaky
		-T2 polite
		-T3 normal => default
		-T4 aggressive
		-T5 insane

note => [] to avoid IDS(intrusion detecting system) you should use -T0 or -T1
		[] -T0 waits 5 min after sending each packet
		[] -T1 often used during real engaements where stealth is more important 
		[] -T3 is the default mode
		[] -T4 commonly used during CTFs and during scanning practice targets
		[] -T5 s the most aggressive in terms of speed; however, this can affect the accuracy of the scan results due to the increased likelihood of packet loss.

	3. Controling The Packet Rate:
		--max-rate <number>
		--min-rate <number>
		ensure that the scanner isn't sending more than 10 packets per second

	4. controling Probes:
		--max-parallelism
		--min-parallelism
		probing parallelization specifies the number of such probes that can be run in parallel. For instance, --min-parallelism=512 pushes Nmap to maintain at least 512 probes in parallel; these 512 probes are related to host discovery and open ports.
		<probes is a scan>

==================================================

- SAMMARY

	-sT => TCP connect port scan
	-sS => TCP SYN prot scan
	-sU => UDP port scan
	-F => 100 top common prot
	--top-prots => 10 top common port
	-p- => scan all ports (65535)
	-r => scan ports in consecutive order
	-T<0-5> => controling scan speed
	--max-rate 50 -> rate <= 50 packets/sec
	--min-rate 15 -> rate >= 15 packets/sec
	--min-parallelisim 100 => al leaset 100 probes in parallel
===================================================

			Allhamdullah